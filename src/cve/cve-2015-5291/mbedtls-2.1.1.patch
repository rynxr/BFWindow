diff -ruN mbedtls-2.1.1/include/mbedtls/config.h mbedtls-2.1.1-patch/include/mbedtls/config.h
--- mbedtls-2.1.1/include/mbedtls/config.h	2015-09-17 02:58:45.000000000 -0700
+++ mbedtls-2.1.1-patch/include/mbedtls/config.h	2016-03-27 23:48:40.056329000 -0700
@@ -1852,7 +1852,7 @@
  *
  * This module provides TCP/IP networking routines.
  */
-#define MBEDTLS_NET_C
+//#define MBEDTLS_NET_C
 
 /**
  * \def MBEDTLS_OID_C
diff -ruN mbedtls-2.1.1/include/mbedtls/ssl.h mbedtls-2.1.1-patch/include/mbedtls/ssl.h
--- mbedtls-2.1.1/include/mbedtls/ssl.h	2015-09-17 02:58:45.000000000 -0700
+++ mbedtls-2.1.1-patch/include/mbedtls/ssl.h	2016-03-27 22:59:07.518629000 -0700
@@ -1604,6 +1604,7 @@
 #endif /* MBEDTLS_X509_CRT_PARSE_C */
 
 #if defined(MBEDTLS_SSL_SERVER_NAME_INDICATION)
+void ssl_write_hostname_ext(mbedtls_ssl_context *ssl, unsigned char *buf, size_t *olen);
 /**
  * \brief          Set own certificate and key for the current handshake
  *
diff -ruN mbedtls-2.1.1/library/ssl_cli.c mbedtls-2.1.1-patch/library/ssl_cli.c
--- mbedtls-2.1.1/library/ssl_cli.c	2015-09-17 02:58:45.000000000 -0700
+++ mbedtls-2.1.1-patch/library/ssl_cli.c	2016-03-27 22:58:02.910179000 -0700
@@ -55,7 +55,7 @@
 #endif
 
 #if defined(MBEDTLS_SSL_SERVER_NAME_INDICATION)
-static void ssl_write_hostname_ext( mbedtls_ssl_context *ssl,
+void ssl_write_hostname_ext( mbedtls_ssl_context *ssl,
                                     unsigned char *buf,
                                     size_t *olen )
 {
diff -ruN mbedtls-2.1.1/Makefile mbedtls-2.1.1-patch/Makefile
--- mbedtls-2.1.1/Makefile	2015-09-17 02:58:45.000000000 -0700
+++ mbedtls-2.1.1-patch/Makefile	2016-03-27 19:12:12.148109000 -0700
@@ -1,5 +1,5 @@
 
-DESTDIR=/usr/local
+DESTDIR?=/usr/local
 PREFIX=mbedtls_
 
 .SILENT:
